<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>【1年】加重平均計算機</title>
</head>

<body>
    <header class="m-3">
        <h1 class="text-center">
            <?xml version="1.0" encoding="UTF-8"?>
            <svg id="_レイヤー_2" data-name="レイヤー 2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 161.7498 140.07944" height="1em">
                <defs>
                    <style>
                        .cls-1 {
                            fill: #606;
                        }
                    </style>
                </defs>
                <g id="_レイヤー_1-2" data-name="レイヤー 1">
                    <polygon class="cls-1" points="80.8749 70.03972 121.31235 0 40.43745 0 80.8749 70.03972" />
                    <polygon class="cls-1" points="40.43745 140.07944 80.8749 70.03972 0 70.03972 40.43745 140.07944" />
                    <polygon class="cls-1" points="121.31235 140.07944 161.7498 70.03972 80.8749 70.03972 121.31235 140.07944" />
                </g>
            </svg>
            加重平均計算機(1年)
        </h1>
    </header>
    <table class="table my-3 mx-auto" style="width: auto !important;">
        <thead>
            <tr>
                <th>科目名</th>
                <th>単位数</th>
                <th>評価(10段階)</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>キリスト教学</td>
                <td><input type="number" id="credit1" class="form-control-plaintext" value="1" readonly disabled></td>
                <td><input type="text" inputmode="numeric" id="score1" class="form-control"></td>
            </tr>
            <tr>
                <td>現代の国語</td>
                <td><input type="number" id="credit2" class="form-control-plaintext" value="2" readonly disabled></td>
                <td><input type="text" inputmode="numeric" id="score2" class="form-control"></td>
            </tr>
            <tr>
                <td>言語文化</td>
                <td><input type="number" id="credit3" class="form-control-plaintext" value="2" readonly disabled></td>
                <td><input type="text" inputmode="numeric" id="score3" class="form-control"></td>
            </tr>
            <tr>
                <td>地理総合</td>
                <td><input type="number" id="credit4" class="form-control-plaintext" value="2" readonly disabled></td>
                <td><input type="text" inputmode="numeric" id="score4" class="form-control"></td>
            </tr>
            <tr>
                <td>歴史総合</td>
                <td><input type="number" id="credit5" class="form-control-plaintext" value="2" readonly disabled></td>
                <td><input type="text" inputmode="numeric" id="score5" class="form-control"></td>
            </tr>
            <tr>
                <td>数学Ｉ</td>
                <td><input type="number" id="credit6" class="form-control-plaintext" value="3" readonly disabled></td>
                <td><input type="text" inputmode="numeric" id="score6" class="form-control"></td>
            </tr>
            <tr>
                <td>数学Ａ</td>
                <td><input type="number" id="credit7" class="form-control-plaintext" value="2" readonly disabled></td>
                <td><input type="text" inputmode="numeric" id="score7" class="form-control"></td>
            </tr>
            <tr>
                <td>化学基礎</td>
                <td><input type="number" id="credit8" class="form-control-plaintext" value="2" readonly disabled></td>
                <td><input type="text" inputmode="numeric" id="score8" class="form-control"></td>
            </tr>
            <tr>
                <td>体育</td>
                <td><input type="number" id="credit9" class="form-control-plaintext" value="3" readonly disabled></td>
                <td><input type="text" inputmode="numeric" id="score9" class="form-control"></td>
            </tr>
            <tr>
                <td>保健</td>
                <td><input type="number" id="credit10" class="form-control-plaintext" value="1" readonly disabled></td>
                <td><input type="text" inputmode="numeric" id="score10" class="form-control"></td>
            </tr>
            <tr>
                <td>美術・音楽</td>
                <td><input type="number" id="credit11" class="form-control-plaintext" value="2" readonly disabled></td>
                <td><input type="text" inputmode="numeric" id="score11" class="form-control"></td>
            </tr>
            <tr>
                <td>英語コミュニケーションＩ</td>
                <td><input type="number" id="credit12" class="form-control-plaintext" value="3" readonly disabled></td>
                <td><input type="text" inputmode="numeric" id="score12" class="form-control"></td>
            </tr>
            <tr>
                <td>論理・表現Ｉ</td>
                <td><input type="number" id="credit13" class="form-control-plaintext" value="2" readonly disabled></td>
                <td><input type="text" inputmode="numeric" id="score13" class="form-control"></td>
            </tr>
            <tr>
                <td>情報Ｉ</td>
                <td><input type="number" id="credit14" class="form-control-plaintext" value="2" readonly disabled></td>
                <td><input type="text" inputmode="numeric" id="score14" class="form-control"></td>
            </tr>
        </tbody>
    </table>
    <div class="text-center">
        <button type="button" class="btn btn-primary" onclick="calc()">加重平均を計算</button>
    </div>
    <script>
        function calc() {
            let totalWeightedScores = 0;
            let totalCredits = 29;

            for (let i = 1; i <= 14; i++) {
                let credit = parseFloat(document.getElementById(`credit${i}`).value);
                let score = parseFloat(document.getElementById(`score${i}`).value) || 0;
                totalWeightedScores += credit * score;
            }

            let weightedAverage = totalWeightedScores / totalCredits;
            alert(`あなたの加重平均は${weightedAverage.toFixed(2)}です。\n\n※学内推薦の基準は4.00以上です。`);
        }

        function handleScoreInput(event, currentFieldNum) {
            const input = event.target;
            const value = input.value;

            if (!/^[1-9]$|^10$/.test(value)) {
                input.value = '';
                return;
            }

            if (value !== '1' && currentFieldNum < 14) {
                const nextField = document.getElementById(`score${currentFieldNum + 1}`);
                if (nextField) {
                    nextField.focus();
                }
            }
        }

        document.addEventListener('DOMContentLoaded', function () {
            for (let i = 1; i <= 14; i++) {
                const scoreField = document.getElementById(`score${i}`);
                if (scoreField) {
                    scoreField.addEventListener('input', (e) => handleScoreInput(e, i));
                }
            }
        });
    </script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
</body>

</html>